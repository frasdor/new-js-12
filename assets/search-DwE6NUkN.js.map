{"version":3,"file":"search-DwE6NUkN.js","sources":["../../src/search.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = '46136265-8c05b511bcb8d1129c580e4d3';\n\nconst form = document.getElementById('searchForm');\nconst gallery = document.getElementById('gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.loadBtn');\n\nlet lightbox;\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 40;\n\n// Funkcja do pobierania obrazów z Pixabay \nasync function fetchImages(query, page) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong while fetching images. Please try again later.',\n    });\n    return { hits: [], totalHits: 0 };\n  }\n}\n\n// Funkcja wyświetlająca obrazy w galerii\nfunction displayImages(images) {\n  if (images.length === 0 && currentPage === 1) {\n    iziToast.error({\n      title: 'No Results',\n      position: 'topRight',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  const markup = images.map((image) => `\n    <a href=\"${image.largeImageURL}\" class=\"image-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n      <div class=\"info\">\n        <div class=\"info-item\"><p>Likes</p><p>${image.likes}</p></div>\n        <div class=\"info-item\"><p>Views</p><p>${image.views}</p></div>\n        <div class=\"info-item\"><p>Comments</p><p>${image.comments}</p></div>\n        <div class=\"info-item\"><p>Downloads</p><p>${image.downloads}</p></div>\n      </div>\n    </a>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  // Inicjalizacja lub odświeżenie SimpleLightbox\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.image-item', { /* opcjonalne opcje */ });\n  }\n}\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n\n\n  const query = document.getElementById('searchQuery').value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      position: 'topRight',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1; // Resetowanie numeru strony\n\n  loader.style.display = 'block';\n  loadMoreButton.style.display = 'none'; // Ukrycie przycisku \"Load more\" podczas nowego wyszukiwania\n\n  gallery.innerHTML = ''; // Czyszczenie galerii przed nowym wyszukiwaniem\n\n  const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n  loader.style.display = 'none';\n\n  displayImages(hits);\n\n  if (hits.length > 0 && gallery.children.length < totalHits) {\n    loadMoreButton.style.display = 'block'; // Pokaż przycisk \"Load more\"\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n\n  loader.style.display = 'block';\n  const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n  loader.style.display = 'none';\n\n  displayImages(hits);\n\n  if (gallery.children.length >= totalHits) {\n    loadMoreButton.style.display = 'none'; // Ukryj przycisk \"Load more\", jeśli to ostatnia strona\n    iziToast.info({\n      title: 'End of Results',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  scrollPage(); // Przewiń stronę po załadowaniu nowych obrazów\n});\n\nfunction scrollPage() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["API_KEY","form","gallery","loader","loadMoreButton","lightbox","currentQuery","currentPage","perPage","fetchImages","query","page","url","axios","iziToast","displayImages","images","markup","image","SimpleLightbox","e","hits","totalHits","scrollPage","cardHeight"],"mappings":"uDAMA,MAAMA,EAAU,qCAEVC,EAAO,SAAS,eAAe,YAAY,EAC3CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,UAAU,EAExD,IAAIC,EACAC,EAAe,GACfC,EAAc,EAClB,MAAMC,EAAU,GAGhB,eAAeC,EAAYC,EAAOC,EAAM,CACtC,MAAMC,EAAM,gCAAgCZ,CAAO,MAAM,mBAAmBU,CAAK,CAAC,qEAAqEF,CAAO,SAASG,CAAI,GAE3K,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,MAAe,CACd,OAAAE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qEACf,CAAK,EACM,CAAE,KAAM,CAAA,EAAI,UAAW,CAAC,CAChC,CACH,CAGA,SAASC,EAAcC,EAAQ,CAC7B,GAAIA,EAAO,SAAW,GAAKT,IAAgB,EAAG,CAC5CO,EAAS,MAAM,CACb,MAAO,aACP,SAAU,WACV,QAAS,0EACf,CAAK,EACD,MACD,CAED,MAAMG,EAASD,EAAO,IAAKE,GAAU;AAAA,eACxBA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,gDAERA,EAAM,KAAK;AAAA,gDACXA,EAAM,KAAK;AAAA,mDACRA,EAAM,QAAQ;AAAA,oDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAGhE,EAAE,KAAK,EAAE,EAEVhB,EAAQ,mBAAmB,YAAae,CAAM,EAG1CZ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIc,EAAe,cAAe,CAA0B,CAAA,CAE3E,CAEAlB,EAAK,iBAAiB,SAAU,MAAOmB,GAAM,CAC3CA,EAAE,eAAc,EAGhB,MAAMV,EAAQ,SAAS,eAAe,aAAa,EAAE,MAAM,OAC3D,GAAI,CAACA,EAAO,CACVI,EAAS,QAAQ,CACf,MAAO,UACP,SAAU,WACV,QAAS,6BACf,CAAK,EACD,MACD,CAEDR,EAAeI,EACfH,EAAc,EAEdJ,EAAO,MAAM,QAAU,QACvBC,EAAe,MAAM,QAAU,OAE/BF,EAAQ,UAAY,GAEpB,KAAM,CAAE,KAAAmB,EAAM,UAAAC,CAAW,EAAG,MAAMb,EAAYH,EAAcC,CAAW,EACvEJ,EAAO,MAAM,QAAU,OAEvBY,EAAcM,CAAI,EAEdA,EAAK,OAAS,GAAKnB,EAAQ,SAAS,OAASoB,IAC/ClB,EAAe,MAAM,QAAU,QAEnC,CAAC,EAEDA,EAAe,iBAAiB,QAAS,SAAY,CACnDG,GAAe,EAEfJ,EAAO,MAAM,QAAU,QACvB,KAAM,CAAE,KAAAkB,EAAM,UAAAC,CAAW,EAAG,MAAMb,EAAYH,EAAcC,CAAW,EACvEJ,EAAO,MAAM,QAAU,OAEvBY,EAAcM,CAAI,EAEdnB,EAAQ,SAAS,QAAUoB,IAC7BlB,EAAe,MAAM,QAAU,OAC/BU,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACf,CAAK,GAGHS,GACF,CAAC,EAED,SAASA,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAKtB,EAAQ,kBAAkB,wBAEzD,OAAO,SAAS,CACd,IAAKsB,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}